X run notebook as right UID
X mount notebook home based on user $HOME
  * done based on user UID
X pin versions of jupyterhub/notebook
X mount a shared directory per course  (done, /course)
X copy nbgrader_config.py to user
X create profilespawner for courses
X Request Aalto SSL cert
  X Install Aalto SSL cert from secrets/ directory
X how to we restart
X Split the proxy from the hub
  - Option 1: Use kubernetes proxy instead of jupyterhub hub proxy
    (probably worse since this doesn't currently do activity tracking
    so we can't cull)
  X Option 2: run configurable-http-proxy in another pod
  X Use image /jupyterhub/configurable-http-proxy:3.1.1
  X See z2jh example: https://github.com/jupyterhub/zero-to-jupyterhub-k8s/blob/master/jupyterhub/templates/proxy/deployment.yaml
X set uid
X set default exchange to /srv/nbgrader/exchange
X course management
  X script to create course
X limit ssh key to only run the init function
- set up kubernetes pod logging.
  - logs: how to get logs of a container that fails immediately?, or
    old container?  Needed for eventually debugging
- "kubectl exec -it ... bash" does not work on user pods, because the
  user home directory has been moved, and docker tries to
  unconditionally cd before running your command.
- /srv/jupyterhub is mounted from jhnas:/vol/jupyter/admin/hubdata/.
  But the hub has root_squash, so these are currently owned by
  nobody/nogroup.  Fix the security.
- change QoS of the hub pod to best.  Does ingress controller have
  enough CPU and memory?
- Check actual CPU/mem usage and adjust limits
- How do we monitor memory and processor usage of the pods and nodes?
X Quotas of the NFS user spaces
- Warn on quotas when logging in
X optional shared coursedata directoryu
X Set announcement on page text
- Check zero to jupyterhub security and see what applies to us:
  https://zero-to-jupyterhub.readthedocs.io/en/latest/security.html
X Separate the teststudent/testinstructor from the Dockerfile so that
  we can publish this git repository publically
X Run "fix-permissions $CONDA_DIR /home/jovyan" in the image creation
X Investigate NFS uid/gids and figure out why it does not work.
- Security of autograding
  X check kernel swapping when executing
  X remote mount the assignment files
  X run in isolated environment
- Security: do we log everything sufficiently?
X Solve mysteriously disappearing server problem

Epics:
X create single user imeage
X configure JH with all the user and spawn hooks



Delayed:
X config JH code version
X config notebook version



MVP stories:
X for student, mount /user and /exchange based on course
